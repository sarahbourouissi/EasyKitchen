<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <title>Easy Kitchen</title>
 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Tizen TV basic template generated by Samsung TV Web IDE"/>
    <script src="js/recette3.js"></script>
    <script src="js/oXHR.js"></script>
    <link rel="stylesheet" type="text/css" href="css/recette.css"/>
    <script type="text/javascript" src="./js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="./js/TVKeyValue.js"></script>
      <script type="text/javascript">

      
      // pointeur sur la position de l'article courant dans le catalogue
      var index = 0;
      // initialisation du catalogue
      var etapes =[];

      function executerRequete(callback) {
          // on vérifie si le catalogue a déjà été chargé pour n'exécuter la requête AJAX
          // qu'une seule fois
          if (etapes.length === 0) {
              // on récupère un objet XMLHttpRequest
              var xhr = getXMLHttpRequest();
              // on réagit à l'événement onreadystatechange
              xhr.onreadystatechange = function() {
                  // test du statut de retour de la requête AJAX
                  if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) {
                      // on désérialise le catalogue et on le sauvegarde dans une variable
                      etapes = JSON.parse(xhr.responseText);
                     
                     
                      // on lance la fonction de callback avec le catalogue récupéré
                      callback();
                  }
              }
              // la requête AJAX : lecture de data.json
             console.log("okkk");
              xhr.open("GET", "http://172.19.7.222/easykitchen/recette1.php?id="+3, true);
              console.log("okkk");
              xhr.send();

              
          } else {
              // on lance la fonction de callback avec le catalogue déjà récupéré précédemment
              callback();
          }
      }

      function lireSuivant() {
    	  console.log("okkk");
          // connaitre le nombre d'articles dans le catalogue
          var longueur = etapes.length;
          console.log(longueur+ "jjjjj");
          // manipulation du DOM pour afficher les caractéristiques de l'article
          
                 
           document.getElementById("recepi").src ="http://172.19.7.222/easykitchen/images/"+etapes[index].image1;
           document.getElementById("ingredient").src ="http://172.19.7.222/easykitchen/images/"+etapes[index].image2;
          
          
      /*    document.getElementById("source").src="http://192.168.1.5/bbsitter/"+catalogue[index].image;
          document.getElementById("nom").innerHTML = catalogue[index].nom;
          document.getElementById("prenom").innerHTML = catalogue[index].prenom;
          document.getElementById("age").innerHTML = catalogue[index].age;
          document.getElementById("adresse").innerHTML = catalogue[index].adresse; */
       
      }
	   executerRequete(lireSuivant);
    
      
   

      // on initialise la lecture au premier élément
   


</script>


</head>
<body> 

<header> 	
 
   <a  onclick="moveTohome()" ><img src="images/nextstep.png" width="195 px" height="112 px"  id="btn_2"  alt="" /></a>




</header>

  
        
           
        
          <img class="recepi" id="recepi" width="668 px" height="384 px"  >
          	<div >
          	<a   onclick="moveToone()"   ><img  id="ingredient"  width="100%"    alt="" /></a>
 
  	</div>
</body>
</html>