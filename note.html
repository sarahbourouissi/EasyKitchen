<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Tizen TV basic template generated by Samsung TV Web IDE"/>

    <title>Easy Kitchen</title>
 <link rel="stylesheet" type="text/css" href="css/note.css"/>
     <script type="text/javascript" src="./js/jquery-1.9.1.js"></script>

        <script src="js/oXHR.js"></script>
       <script type="text/javascript" src="./js/TVKeyValue.js"></script>
       <script type="text/javascript">
       
       window.onload = function () {
    	   
    	    // add eventListener for tizenhwkey
    	    document.addEventListener('tizenhwkey', function(e) {
    	        if(e.keyName == "back")
    		try {
    			parent.location="quizs.html";
    		} catch (ignore) {
    		}
    	    });

    	    }
      
      // pointeur sur la position de l'article courant dans le catalogue
      var index = 0;
      // initialisation du catalogue
      var notes =[];

      function executerRequete(callback) {
          // on vérifie si le catalogue a déjà été chargé pour n'exécuter la requête AJAX
          // qu'une seule fois
          if (notes.length === 0) {
              // on récupère un objet XMLHttpRequest
              var xhr = getXMLHttpRequest();
              // on réagit à l'événement onreadystatechange
              xhr.onreadystatechange = function() {
                  // test du statut de retour de la requête AJAX
                  if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) {
                      // on désérialise le catalogue et on le sauvegarde dans une variable
                      notes = JSON.parse(xhr.responseText);
                     
                     
                      // on lance la fonction de callback avec le catalogue récupéré
                      callback();
                  }
              }
              // la requête AJAX : lecture de data.json
             console.log("okkk");
              xhr.open("GET", "http://192.168.1.2/easykitchen/get_note.php?id="+sessionStorage.getItem("id_user"), true);
              console.log(sessionStorage.getItem("id_user")+"5555");
              console.log("okkk");
              xhr.send();

              
          } else {
              // on lance la fonction de callback avec le catalogue déjà récupéré précédemment
              callback();
          }
      }

      function getNote() {
    	  console.log("okkk");
          // connaitre le nombre d'articles dans le catalogue
          var longueur = notes.length;
          console.log(longueur+ "jjjjj");
          // manipulation du DOM pour afficher les caractéristiques de l'article
          
      	var i;
      	var j 
    	for(i=0; i<longueur; i++){
    		// to do 
    		j=i+1;
    	$(".note").append('<div class="nn">  quiz '+j+' - note =  '+notes[i].note+ '</div>');
    	}			
    			
           
          
          
          
      
      }
	   executerRequete(getNote);
    
      
   

      // on initialise la lecture au premier élément
   


</script>
       
</head>

 
<body>


<header> 	<a  onclick="moveTotow()" ><img src="images/fleche.png" width="195 px" height="112 px"   id="btn_2"  alt="" /></a></header>



<div class="note" >

  	
  </div>



</body>
</html>