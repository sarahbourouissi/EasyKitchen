<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Tizen TV basic template generated by Samsung TV Web IDE"/>

    <title>Easy Kitchen</title>
 <link rel="stylesheet" type="text/css" href="css/etape.css"/>
     <script type="text/javascript" src="./js/jquery-1.9.1.js"></script>

        <script src="js/oXHR.js"></script>
       <script type="text/javascript" src="./js/TVKeyValue.js"></script>
       <script type="text/javascript">
       
       window.onload = function () {
    	   
    	    // add eventListener for tizenhwkey
    	    document.addEventListener('tizenhwkey', function(e) {
    	        if(e.keyName == "back")
    		try {
    			parent.location="recette3.html";
    		} catch (ignore) {
    		}
    	    });

    	    }
      
      // pointeur sur la position de l'article courant dans le catalogue
      var index = 0;
      // initialisation du catalogue
      var etapes =[];

      function executerRequete(callback) {
          // on vérifie si le catalogue a déjà été chargé pour n'exécuter la requête AJAX
          // qu'une seule fois
          if (etapes.length === 0) {
              // on récupère un objet XMLHttpRequest
              var xhr = getXMLHttpRequest();
              // on réagit à l'événement onreadystatechange
              xhr.onreadystatechange = function() {
                  // test du statut de retour de la requête AJAX
                  if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) {
                      // on désérialise le catalogue et on le sauvegarde dans une variable
                      etapes = JSON.parse(xhr.responseText);
                     
                     
                      // on lance la fonction de callback avec le catalogue récupéré
                      callback();
                  }
              }
              // la requête AJAX : lecture de data.json
             console.log("okkk");
              xhr.open("GET", "http://172.19.7.222/easykitchen/recette1.php?id="+3, true);
              console.log("okkk");
              xhr.send();

              
          } else {
              // on lance la fonction de callback avec le catalogue déjà récupéré précédemment
              callback();
          }
      }

      function lireSuivant() {
    	  console.log("okkk");
          // connaitre le nombre d'articles dans le catalogue
          var longueur = etapes.length;
          console.log(longueur+ "jjjjj");
          // manipulation du DOM pour afficher les caractéristiques de l'article
          
                 document.getElementById("etape1_desc").innerHTML = etapes[index].etape1_desc;
           console.log(etapes[index].etape1_desc);
          
           document.getElementById("etape2_desc").innerHTML = etapes[index].etape2_desc;
          
           document.getElementById("etape3_desc").innerHTML = etapes[index].etape3_desc;
           document.getElementById("etape4_desc").innerHTML = etapes[index].etape4_desc;
           
          
          
          
      /*    document.getElementById("source").src="http://192.168.1.5/bbsitter/"+catalogue[index].image;
          document.getElementById("nom").innerHTML = catalogue[index].nom;
          document.getElementById("prenom").innerHTML = catalogue[index].prenom;
          document.getElementById("age").innerHTML = catalogue[index].age;
          document.getElementById("adresse").innerHTML = catalogue[index].adresse; */
       
      }
	   executerRequete(lireSuivant);
    
      
   

      // on initialise la lecture au premier élément
   


</script>
       
</head>

 
<body>


<header> 	<a  onclick="moveTotow()" ><img src="images/fleche.png" width="195 px" height="112 px"   id="btn_2"  alt="" /></a></header>


<div>
<div class="etape" >
<p class="flotte">
<img src="images/one.png"   width="200px" height="200px" id="btn_2"  alt="" />
	</p>					
	<h1 style="line-height:200px;" id="etape1_desc" ></h1> 
	</div>
	<div class="etape">
<p class="flotte">


<img src="images/tow.png"   width="200px" height="200px" id="btn_2"  alt="" />
	</p>					
	<h1 style="line-height:200px;"  id="etape2_desc"> </h1>
	</div>
		<div class="etape">
<p class="flotte">


<img src="images/three.png"   width="200px" height="200px" id="btn_2"  alt="" />
	</p>					
	<h1 style="line-height:200px;" id="etape3_desc"> </h1>
	</div>
		<div class="etape">
<p class="flotte">


<img src="images/four.png"   width="200px" height="200px" id="btn_2"  alt="" />
	</p>					
	<h1 style="line-height:200px;"  id="etape4_desc"> </h1>
	</div>
	
  	
  </div>



</body>
</html>